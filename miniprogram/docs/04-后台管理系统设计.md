# RUIZHU 小程序后台管理系统设计文档

## 1. 后台管理系统概述

### 1.1 系统定位
- 面向: 商家、运营、财务、客服团队
- 功能: 商品、订单、用户、营销、数据分析管理
- 技术: Vue.js 3 + Element Plus + TypeScript
- 部署: 独立域名 admin.ruizhu.com

### 1.2 用户角色与权限

```
角色体系:
├─ 超级管理员 (Super Admin)
│  ├─ 权限: 所有权限
│  └─ 职责: 系统配置、权限管理
│
├─ 商品管理员 (Product Admin)
│  ├─ 权限: 商品CRUD、分类管理、库存管理
│  └─ 职责: 商品上下架、库存调整
│
├─ 订单管理员 (Order Admin)
│  ├─ 权限: 订单查看、发货、退款处理
│  └─ 职责: 订单处理、售后管理
│
├─ 运营人员 (Operations)
│  ├─ 权限: 优惠券、轮播图、推荐商品管理
│  └─ 职责: 营销活动策划
│
├─ 财务人员 (Finance)
│  ├─ 权限: 订单统计、收入统计、成本管理
│  └─ 职责: 财务分析、报表生成
│
└─ 客服人员 (Customer Service)
   ├─ 权限: 咨询查看、订单问题处理
   └─ 职责: 用户咨询回复、投诉处理
```

---

## 2. 后台功能模块详细设计

### 2.1 仪表板 (Dashboard)

```
显示内容:
├─ 今日关键指标
│  ├─ 总销售额 (¥)
│  ├─ 新增订单数
│  ├─ 新增用户数
│  └─ 转化率 (%)
│
├─ 近7日趋势图
│  ├─ 订单量趋势
│  ├─ 销售额趋势
│  ├─ 用户增长趋势
│  └─ 访问量趋势
│
├─ 热销商品 Top 10
│  ├─ 商品名称
│  ├─ 销售量
│  └─ 销售额
│
└─ 待处理任务
   ├─ 未回复咨询数
   ├─ 待发货订单数
   └─ 库存预警商品数
```

### 2.2 商品管理模块

#### 2.2.1 商品列表

```
功能:
├─ 列表展示
│  ├─ 商品图片、SKU、名称、分类
│  ├─ 销售价/原价、库存、销售量
│  └─ 状态、操作时间
│
├─ 搜索和筛选
│  ├─ 按SKU搜索
│  ├─ 按商品名称搜索
│  ├─ 按分类筛选
│  ├─ 按价格范围筛选
│  ├─ 按状态筛选 (上架/下架)
│  └─ 按日期范围筛选
│
├─ 批量操作
│  ├─ 批量上架/下架
│  ├─ 批量编辑价格
│  ├─ 批量删除
│  └─ 批量导出
│
└─ 单项操作
   ├─ 编辑商品
   ├─ 查看详情
   ├─ 删除商品
   └─ 复制商品
```

#### 2.2.2 商品编辑

```
编辑表单:
├─ 基本信息
│  ├─ 商品名称 (必填)
│  ├─ SKU (必填，唯一)
│  ├─ 分类 (必填)
│  └─ 品牌 (默认RUIZHU)
│
├─ 价格设置
│  ├─ 销售价 (必填)
│  ├─ 原价
│  └─ 成本价 (仅财务可见)
│
├─ 图片管理
│  ├─ 上传主图
│  ├─ 上传详情图
│  └─ 图片拖拽排序
│
├─ 商品详情
│  ├─ 详细描述 (富文本编辑)
│  ├─ 颜色选项
│  ├─ 尺码选项
│  └─ 材质
│
├─ 库存管理
│  ├─ 初始库存
│  ├─ 当前库存
│  └─ 库存预警值
│
├─ 商品标签
│  ├─ 是否新品
│  ├─ 是否热销
│  └─ 推荐位
│
└─ 发布设置
   ├─ 立即发布/定时发布
   └─ 发布状态 (草稿/已发布/下架)
```

#### 2.2.3 库存管理

```
功能:
├─ 库存列表
│  ├─ 商品名称、SKU
│  ├─ 当前库存、预警值
│  ├─ 销售量、剩余天数预测
│  └─ 操作
│
├─ 库存调整
│  ├─ 调整库存 (+/- 数量)
│  ├─ 调整原因 (补货/销售/损耗)
│  └─ 操作人员和时间记录
│
├─ 库存预警
│  ├─ 库存不足商品警告
│  ├─ 自动通知
│  └─ 建议补货数量
│
└─ 批量导入
   ├─ Excel导入
   ├─ CSV导入
   └─ 导入历史记录
```

#### 2.2.4 分类管理

```
功能:
├─ 分类列表
│  ├─ 分类名称
│  ├─ 商品数量
│  ├─ 排序权重
│  └─ 是否启用
│
├─ 新增分类
│  ├─ 分类名称 (必填)
│  ├─ 分类描述
│  ├─ 分类图标
│  ├─ 排序权重
│  └─ 是否显示
│
└─ 编辑和删除
   ├─ 编辑分类信息
   └─ 删除分类 (无商品时)
```

### 2.3 订单管理模块

#### 2.3.1 订单列表

```
功能:
├─ 订单列表
│  ├─ 订单号、用户信息
│  ├─ 订单金额、支付状态
│  ├─ 发货状态、订单时间
│  └─ 操作按钮
│
├─ 搜索和筛选
│  ├─ 按订单号搜索
│  ├─ 按用户手机号/昵称搜索
│  ├─ 按状态筛选 (待支付/已支付/已发货/已完成/已取消)
│  ├─ 按支付方式筛选
│  ├─ 按日期范围筛选
│  ├─ 按金额范围筛选
│  └─ 组合筛选
│
├─ 批量操作
│  ├─ 批量发货
│  ├─ 批量打单 (生成快递单)
│  ├─ 批量导出
│  └─ 批量打印
│
└─ 快速操作
   ├─ 查看详情
   ├─ 编辑订单
   ├─ 发货
   ├─ 取消订单
   └─ 处理售后
```

#### 2.3.2 订单详情

```
显示内容:
├─ 订单信息
│  ├─ 订单号、订单时间
│  ├─ 订单状态、支付状态
│  ├─ 用户信息 (头像、昵称、手机)
│  └─ 订单金额明细
│
├─ 商品清单
│  ├─ 商品图片、名称、SKU
│  ├─ 规格 (颜色、尺码)
│  ├─ 单价、数量、小计
│  └─ 可退货标记
│
├─ 收货地址
│  ├─ 收货人、手机号
│  ├─ 完整收货地址
│  └─ 修改地址按钮
│
├─ 发货信息
│  ├─ 快递公司
│  ├─ 快递单号
│  ├─ 发货时间
│  └─ 快递查询链接
│
├─ 退款信息 (如有)
│  ├─ 退款单号
│  ├─ 退款金额
│  ├─ 退款原因
│  ├─ 审核状态
│  └─ 退款时间
│
└─ 订单操作记录
   ├─ 操作时间
   ├─ 操作类型
   ├─ 操作人员
   └─ 操作备注
```

#### 2.3.3 发货管理

```
功能:
├─ 待发货列表
│  ├─ 筛选和搜索
│  ├─ 批量发货
│  └─ 快速操作
│
├─ 发货流程
│  ├─ 选择快递公司
│  ├─ 输入快递单号
│  ├─ 打印快递面单
│  ├─ 确认发货
│  └─ 短信通知用户
│
└─ 快递面单打印
   ├─ 单个打印
   ├─ 批量打印
   └─ 快递单号导入
```

#### 2.3.4 售后管理

```
功能:
├─ 退款申请列表
│  ├─ 申请单号、订单号
│  ├─ 用户信息
│  ├─ 退款金额、原因
│  ├─ 申请时间、状态
│  └─ 操作
│
├─ 审核流程
│  ├─ 查看退款申请详情
│  ├─ 查看退款凭证 (图片)
│  ├─ 批准/拒绝退款
│  ├─ 添加备注
│  └─ 确认退款完成
│
└─ 退款统计
   ├─ 日均退款额
   ├─ 退款率统计
   └─ 退款原因分析
```

### 2.4 会员管理模块

```
功能:
├─ 用户列表
│  ├─ 用户昵称、头像
│  ├─ 手机号、邮箱
│  ├─ 用户等级 (普通/VIP)
│  ├─ 注册时间、最后登录
│  └─ 操作 (禁用/升级VIP)
│
├─ 用户搜索和筛选
│  ├─ 按昵称搜索
│  ├─ 按手机号搜索
│  ├─ 按用户等级筛选
│  ├─ 按注册日期筛选
│  └─ 按消费金额筛选
│
├─ 用户详情
│  ├─ 基本信息
│  ├─ 订单历史
│  ├─ 收藏列表
│  ├─ 地址簿
│  └─ 操作记录
│
└─ 会员管理
   ├─ VIP等级配置
   ├─ 会员权益设置
   ├─ 会员升级规则
   └─ 会员有效期管理
```

### 2.5 营销管理模块

#### 2.5.1 优惠券管理

```
功能:
├─ 优惠券列表
│  ├─ 优惠券码、名称
│  ├─ 折扣方式 (固定金额/百分比)
│  ├─ 使用限制
│  ├─ 有效期
│  ├─ 使用情况统计
│  └─ 操作
│
├─ 创建优惠券
│  ├─ 优惠券码 (自动生成)
│  ├─ 优惠券名称
│  ├─ 优惠券描述
│  ├─ 折扣类型和金额
│  ├─ 使用限制
│  │  ├─ 最少购买金额
│  │  ├─ 最高折扣金额
│  │  ├─ 每个用户最多使用次数
│  │  └─ 总使用次数限制
│  ├─ 有效期 (开始和结束日期)
│  └─ 描述和规则
│
└─ 优惠券统计
   ├─ 已使用次数
   ├─ 使用率
   ├─ 平均优惠金额
   └─ 优惠券效果评估
```

#### 2.5.2 轮播图管理

```
功能:
├─ 轮播图列表
│  ├─ 轮播图预览
│  ├─ 标题、副标题
│  ├─ 链接配置
│  ├─ 排序权重
│  ├─ 有效期
│  └─ 操作
│
├─ 新增/编辑轮播图
│  ├─ 上传图片
│  ├─ 输入标题和副标题
│  ├─ 配置链接类型 (商品/分类/外部URL)
│  ├─ 链接值设置
│  ├─ 排序权重
│  ├─ 有效期设置 (开始和结束日期)
│  └─ 是否启用
│
└─ 轮播图排序
   ├─ 拖拽排序
   └─ 权重调整
```

#### 2.5.3 推荐商品配置

```
功能:
├─ 推荐位列表
│  ├─ 推荐位名称 (首页推荐/购物车推荐等)
│  ├─ 已配置商品数
│  ├─ 更新时间
│  └─ 操作
│
├─ 配置推荐商品
│  ├─ 选择推荐位
│  ├─ 搜索和选择商品
│  ├─ 拖拽调整顺序
│  ├─ 设置有效期
│  └─ 批量导入
│
└─ 推荐位统计
   ├─ 点击数
   ├─ 点击率
   ├─ 转化数
   └─ 转化率
```

### 2.6 VIP定制咨询管理

```
功能:
├─ 咨询列表
│  ├─ 咨询单号、用户昵称
│  ├─ 咨询类型 (定制/询问)
│  ├─ 咨询内容摘要
│  ├─ 状态 (新建/处理中/已回复/已完成)
│  ├─ 提交时间
│  └─ 操作
│
├─ 咨询详情
│  ├─ 用户信息 (昵称、头像、联系方式)
│  ├─ 咨询内容
│  ├─ 上传的图片
│  ├─ 关联商品 (如有)
│  └─ 操作
│
├─ 回复咨询
│  ├─ 输入回复内容 (支持富文本)
│  ├─ 上传回复图片
│  ├─ 指派给其他员工 (可选)
│  └─ 提交回复
│
└─ 咨询统计
   ├─ 待处理咨询数
   ├─ 平均回复时间
   ├─ 用户满意度评分
   └─ 咨询类别分布
```

### 2.7 数据分析模块

#### 2.7.1 概览分析

```
显示内容:
├─ 核心指标卡片
│  ├─ 总销售额 (环比)
│  ├─ 订单数 (环比)
│  ├─ 平均订单价值 (环比)
│  ├─ 转化率 (环比)
│  └─ 活跃用户数 (环比)
│
├─ 时间段选择
│  ├─ 昨日/本周/本月/本年
│  ├─ 自定义时间范围
│  └─ 数据对比选项
│
└─ 趋势图表
   ├─ 订单量趋势
   ├─ 销售额趋势
   └─ 用户趋势
```

#### 2.7.2 销售分析

```
功能:
├─ 销售排行
│  ├─ 商品销售排行 Top 20
│  ├─ 分类销售排行
│  ├─ 按销售额/销售量排序
│  └─ 可导出数据
│
├─ 销售漏斗
│  ├─ 浏览 → 加入购物车 → 下单 → 支付
│  ├─ 各环节转化率
│  └─ 优化建议
│
└─ 销售日报
   ├─ 日均销售额
   ├─ 日均订单数
   └─ 销售占比分析
```

#### 2.7.3 用户分析

```
功能:
├─ 用户统计
│  ├─ 新增用户数 (日/周/月)
│  ├─ 活跃用户数 (DAU/WAU/MAU)
│  ├─ 用户留存率
│  └─ 用户流失分析
│
├─ 用户分群
│  ├─ 按消费金额分群
│  ├─ 按注册时间分群
│  ├─ 按地区分群
│  └─ 自定义分群
│
└─ 用户价值分析
   ├─ 用户生命周期价值 (LTV)
   ├─ 用户获取成本 (CAC)
   └─ 复购率
```

#### 2.7.4 财务报表

```
功能:
├─ 收入统计
│  ├─ 日收入、周收入、月收入
│  ├─ 收入来源分析 (商品分类)
│  └─ 收入对比
│
├─ 成本统计
│  ├─ 商品成本
│  ├─ 快递成本
│  ├─ 优惠券成本
│  └─ 运营成本
│
├─ 利润分析
│  ├─ 总利润、毛利率
│  ├─ 商品利润率排行
│  └─ 利润趋势
│
└─ 对账单
   ├─ 日对账单
   ├─ 周对账单
   └─ 月对账单
```

### 2.8 系统管理模块

#### 2.8.1 管理员管理

```
功能:
├─ 管理员列表
│  ├─ 管理员名称、邮箱
│  ├─ 所属角色
│  ├─ 创建时间、最后登录
│  ├─ 状态 (启用/禁用)
│  └─ 操作 (编辑/禁用/删除)
│
├─ 新增管理员
│  ├─ 邮箱地址 (唯一)
│  ├─ 用户名
│  ├─ 初始密码
│  ├─ 分配角色
│  └─ 设置权限
│
└─ 编辑管理员
   ├─ 修改基本信息
   ├─ 修改角色和权限
   └─ 重置密码
```

#### 2.8.2 角色权限管理

```
功能:
├─ 角色列表
│  ├─ 角色名称、描述
│  ├─ 拥有权限数
│  ├─ 管理员数
│  └─ 操作
│
├─ 权限配置
│  ├─ 选择角色
│  ├─ 权限树状显示
│  ├─ 模块权限 (菜单访问)
│  ├─ 操作权限 (增删改查)
│  ├─ 数据范围权限 (仅看自己/整个门店等)
│  └─ 保存配置
│
└─ 权限预览
   ├─ 查看该角色拥有的所有权限
   └─ 权限冲突检查
```

#### 2.8.3 操作日志

```
功能:
├─ 日志列表
│  ├─ 操作时间、操作人员
│  ├─ 操作模块、操作类型
│  ├─ 操作内容摘要
│  ├─ IP地址、操作结果
│  └─ 查看详情
│
├─ 搜索和筛选
│  ├─ 按操作人员搜索
│  ├─ 按操作模块筛选
│  ├─ 按操作类型筛选
│  ├─ 按时间范围筛选
│  └─ 按操作结果筛选
│
└─ 导出日志
   ├─ 导出为Excel
   └─ 导出为CSV
```

#### 2.8.4 系统设置

```
配置项:
├─ 基本设置
│  ├─ 网站名称
│  ├─ Logo和Favicon
│  ├─ 联系方式 (电话、邮箱)
│  └─ 公司地址
│
├─ 支付配置
│  ├─ 微信支付密钥
│  ├─ 手续费率
│  └─ 支付超时时间
│
├─ 物流配置
│  ├─ 快递公司列表
│  ├─ 运费计算方式
│  └─ 默认快递公司
│
├─ 功能开关
│  ├─ 下单功能
│  ├─ 支付功能
│  ├─ 发货功能
│  └─ 评价功能
│
└─ 邮件通知配置
   ├─ SMTP服务器配置
   ├─ 模板设置
   └─ 发送规则
```

---

## 3. 后台前端技术栈

```
框架: Vue.js 3 + TypeScript
UI库: Element Plus
图表: ECharts / Ant Design Charts
编辑器: Wangeditor (富文本)
表格: VXE-Table (高性能表格)
上传: Element Plus Upload + Qiniu/Aliyun
状态管理: Pinia
HTTP客户端: Axios
部署: Nginx + Docker
```

---

## 4. 后台API权限控制

```
认证方式: JWT Token + Refresh Token
权限验证:
├─ 菜单权限 (route guard)
├─ 按钮权限 (v-permission指令)
├─ 数据权限 (后端数据过滤)
└─ 操作权限 (API级别验证)

敏感操作:
├─ 删除操作: 需要二次确认
├─ 价格修改: 需要审核
├─ 退款处理: 需要特殊权限
└─ 系统配置: 仅超级管理员
```

---

## 5. 后台部署和运维

### 5.1 部署架构

```
Docker镜像 → Harbor仓库 → Kubernetes
          ↓
    - Nginx (反向代理)
    - Vue.js应用 (前端)
    - API Gateway (后端)
```

### 5.2 性能优化

```
前端优化:
├─ 代码分割和懒加载
├─ 图片压缩和CDN加速
├─ 缓存策略 (localStorage)
└─ 虚拟列表 (大数据表格)

后端优化:
├─ 数据库查询优化
├─ 缓存层使用 (Redis)
├─ 异步任务处理
└─ 分页和限流
```

---

**文档版本**: v1.0
**最后更新**: 2024-10-25
