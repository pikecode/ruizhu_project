import{r as u,_ as f,u as g,a as x,j as s}from"./index-DOxEGdKT.js";import{a as n}from"./api-CLxMmQJN.js";import{F as r}from"./index-BjooXP4d.js";import{C as v}from"./index-50YUuaol.js";import{I as l}from"./index-BSvmuOKN.js";import{R as j}from"./UserOutlined-8APkalxd.js";import{I,B as _}from"./button-DgKdKgQi.js";import{s as m}from"./index-BXb1MVlp.js";import"./Input-CUo6ECZN.js";import"./CloseCircleFilled-CLg-dlze.js";import"./row-BwxrU85I.js";import"./ExclamationCircleFilled-Byg_8rfJ.js";var k={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},y=function(t,a){return u.createElement(I,f({},t,{ref:a,icon:k}))},w=u.forwardRef(y);const z={login:e=>n.post("/auth/login",e).then(t=>t.data.data),register:e=>n.post("/auth/register",e).then(t=>t.data.data),logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user")},getProfile:()=>n.get("/auth/profile").then(e=>e.data.data),refreshToken:()=>{const e=localStorage.getItem("refreshToken");return n.post("/auth/refresh",{refreshToken:e}).then(t=>t.data.data)}},P=e=>{var t,a;return typeof e=="string"?e:(a=(t=e==null?void 0:e.response)==null?void 0:t.data)!=null&&a.message?e.response.data.message:e!=null&&e.message?e.message:"An unknown error occurred"},S="_container_1l6co_1",T="_card_1l6co_9",L="_header_1l6co_19",M="_footer_1l6co_35",c={container:S,card:T,header:L,footer:M};function q(){const e=g(),{setUser:t,setToken:a,setIsLoading:i}=x(),[d]=r.useForm(),h=async p=>{try{i(!0);const o=await z.login(p);a(o.accessToken),t(o.user),m.success("Login successful"),e("/dashboard")}catch(o){m.error(P(o))}finally{i(!1)}};return s.jsx("div",{className:c.container,children:s.jsxs(v,{className:c.card,children:[s.jsxs("div",{className:c.header,children:[s.jsx("h1",{children:"Ruizhu Admin"}),s.jsx("p",{children:"E-Commerce Management Platform"})]}),s.jsxs(r,{form:d,onFinish:h,layout:"vertical",children:[s.jsx(r.Item,{name:"username",rules:[{required:!0,message:"Please input your username!"}],children:s.jsx(l,{prefix:s.jsx(j,{}),placeholder:"Username",size:"large",autoComplete:"username"})}),s.jsx(r.Item,{name:"password",rules:[{required:!0,message:"Please input your password!"}],children:s.jsx(l.Password,{prefix:s.jsx(w,{}),placeholder:"Password",size:"large",autoComplete:"current-password"})}),s.jsx(r.Item,{children:s.jsx(_,{type:"primary",htmlType:"submit",block:!0,size:"large",children:"Sign In"})})]}),s.jsx("div",{className:c.footer,children:s.jsx("p",{children:"Demo: Use any username/password to test"})})]})})}export{q as default};
