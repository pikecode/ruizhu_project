# Admin ç³»ç»Ÿ - ä¸¤ä¸ªç”¨æˆ·ç®¡ç†

## ğŸ“‹ æ¦‚è¿°

Admin ç³»ç»Ÿç°åœ¨åŒ…å«ä¸¤ä¸ªç‹¬ç«‹çš„ç”¨æˆ·ç®¡ç†æ¨¡å—ï¼š

1. **ğŸ” Admin ç”¨æˆ·ç®¡ç†** - ç®¡ç† Admin ç³»ç»Ÿçš„ç®¡ç†å‘˜ã€ç»ç†ã€æ“ä½œå‘˜
2. **ğŸ‘¥ æ¶ˆè´¹è€…ç”¨æˆ·ç®¡ç†** - ç®¡ç†å°ç¨‹åºçš„æ¶ˆè´¹è€…ç”¨æˆ·

è¿™ä¸¤ä¸ªç³»ç»Ÿå®Œå…¨ç‹¬ç«‹ï¼Œæ•°æ®å­˜å‚¨åœ¨ä¸åŒçš„æ•°æ®åº“è¡¨ä¸­ã€‚

## ğŸ” Admin ç”¨æˆ·ç®¡ç†

**é¡µé¢è·¯ç”±**: `/users`
**èœå•æ ‡ç­¾**: ğŸ” Adminç”¨æˆ·
**API ç«¯ç‚¹**: `/api/admin/users`
**æ•°æ®è¡¨**: `admin_users`

### åŠŸèƒ½ç‰¹æ€§

- âœ… æŸ¥çœ‹ Admin ç”¨æˆ·åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
- âœ… åˆ é™¤ Admin ç”¨æˆ·
- âœ… æŸ¥çœ‹ç”¨æˆ·è§’è‰²ï¼ˆAdmin/Manager/Operatorï¼‰
- âœ… æŸ¥çœ‹ç”¨æˆ·çŠ¶æ€ï¼ˆå¯ç”¨/ç¦ç”¨/å°ç¦ï¼‰
- âœ… æŸ¥çœ‹ç™»å½•ç»Ÿè®¡ä¿¡æ¯

### è¡¨æ ¼åˆ—

| åˆ—å | è¯´æ˜ |
|------|------|
| ID | ç”¨æˆ·å”¯ä¸€æ ‡è¯† |
| ç”¨æˆ·å | ç™»å½•ç”¨æˆ·å |
| æ˜µç§° | ç”¨æˆ·æ˜¾ç¤ºåç§° |
| é‚®ç®± | è”ç³»é‚®ç®± |
| è§’è‰² | admin/manager/operator |
| çŠ¶æ€ | å¯ç”¨/ç¦ç”¨/å°ç¦ |
| ç™»å½•æ¬¡æ•° | ç”¨æˆ·æ€»ç™»å½•æ¬¡æ•° |
| æœ€åç™»å½• | æœ€åä¸€æ¬¡ç™»å½•æ—¶é—´ |
| æ“ä½œ | åˆ é™¤ç”¨æˆ· |

### é»˜è®¤ Admin ç”¨æˆ·

```
ç”¨æˆ·å: admin          å¯†ç : admin123456   è§’è‰²: è¶…çº§ç®¡ç†å‘˜
ç”¨æˆ·å: manager        å¯†ç : manager123456 è§’è‰²: ç»ç†
ç”¨æˆ·å: operator       å¯†ç : operator123456 è§’è‰²: æ“ä½œå‘˜
```

## ğŸ‘¥ æ¶ˆè´¹è€…ç”¨æˆ·ç®¡ç†

**é¡µé¢è·¯ç”±**: `/consumer-users`
**èœå•æ ‡ç­¾**: ğŸ‘¥ æ¶ˆè´¹è€…ç”¨æˆ·
**API ç«¯ç‚¹**: `/api/users`
**æ•°æ®è¡¨**: `users`

### åŠŸèƒ½ç‰¹æ€§

- âœ… æŸ¥çœ‹æ¶ˆè´¹è€…ç”¨æˆ·åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
- âœ… æŸ¥çœ‹ç”¨æˆ·åŸºæœ¬ä¿¡æ¯ï¼ˆæ˜µç§°ã€æ‰‹æœºå·ã€é‚®ç®±ï¼‰
- âœ… æŸ¥çœ‹å¾®ä¿¡æˆæƒä¿¡æ¯
- âœ… ç¦ç”¨ç”¨æˆ·è´¦æˆ·
- âœ… åˆ é™¤ç”¨æˆ·
- âœ… æŸ¥çœ‹ç™»å½•ç»Ÿè®¡

### è¡¨æ ¼åˆ—

| åˆ—å | è¯´æ˜ |
|------|------|
| ID | ç”¨æˆ·å”¯ä¸€æ ‡è¯† |
| æ˜µç§° | ç”¨æˆ·æ˜¾ç¤ºåç§° |
| æ‰‹æœºå· | ç»‘å®šçš„æ‰‹æœºå· |
| é‚®ç®± | ç”¨æˆ·é‚®ç®± |
| å¾®ä¿¡ | å¾®ä¿¡ openIdï¼ˆç¼©çŸ­æ˜¾ç¤ºï¼‰ |
| æ³¨å†Œæ¥æº | å¾®ä¿¡å°ç¨‹åº/Web/ç®¡ç†å‘˜åˆ›å»º |
| çŠ¶æ€ | æ´»è·ƒ/ç¦ç”¨/å·²åˆ é™¤ |
| ç™»å½•æ¬¡æ•° | ç”¨æˆ·æ€»ç™»å½•æ¬¡æ•° |
| æœ€åç™»å½• | æœ€åä¸€æ¬¡ç™»å½•æ—¶é—´ |
| æ“ä½œ | ç¦ç”¨/åˆ é™¤ç”¨æˆ· |

## ğŸ”„ æ•°æ®å¯¹æ¯”

### Admin ç”¨æˆ· (admin_users)

```sql
-- å­—æ®µ
id, username, email, password, nickname, avatar_url,
role, status, is_super_admin, login_count, created_at, updated_at
```

**ç”¨é€”**: Admin åå°ç³»ç»Ÿçš„ç®¡ç†å‘˜è´¦æˆ·

### æ¶ˆè´¹è€…ç”¨æˆ· (users)

```sql
-- å­—æ®µ
id, phone, open_id, username, email, password, nickname,
avatar_url, gender, status, registration_source, login_count, created_at, updated_at
```

**ç”¨é€”**: å°ç¨‹åºæ¶ˆè´¹è€…è´¦æˆ·

## ğŸš€ ä½¿ç”¨æµç¨‹

### Admin ç”¨æˆ·ç®¡ç†

1. æ‰“å¼€èœå• â†’ ç‚¹å‡» "ğŸ” Adminç”¨æˆ·"
2. æŸ¥çœ‹ Admin ç®¡ç†å‘˜åˆ—è¡¨
3. ç‚¹å‡»"åˆ·æ–°"è·å–æœ€æ–°æ•°æ®
4. ç‚¹å‡»"åˆ é™¤"æŒ‰é’®åˆ é™¤ç”¨æˆ·

### æ¶ˆè´¹è€…ç”¨æˆ·ç®¡ç†

1. æ‰“å¼€èœå• â†’ ç‚¹å‡» "ğŸ‘¥ æ¶ˆè´¹è€…ç”¨æˆ·"
2. æŸ¥çœ‹å°ç¨‹åºç”¨æˆ·åˆ—è¡¨
3. ç‚¹å‡»"åˆ·æ–°"è·å–æœ€æ–°æ•°æ®
4. ç‚¹å‡»"ç¦ç”¨"æŒ‰é’®ç¦ç”¨ç”¨æˆ·è´¦æˆ·
5. ç‚¹å‡»"åˆ é™¤"æŒ‰é’®åˆ é™¤ç”¨æˆ·

## ğŸ“± ç”¨æˆ·ç±»å‹å¯¹æ¯”

| åŠŸèƒ½ | Admin ç”¨æˆ· | æ¶ˆè´¹è€…ç”¨æˆ· |
|------|-----------|----------|
| ç³»ç»Ÿ | Admin åå° | å°ç¨‹åº |
| è®¤è¯æ–¹å¼ | ç”¨æˆ·åå¯†ç  | å¾®ä¿¡ç™»å½• |
| ä¸»è¦å­—æ®µ | username, role | phone, openId |
| ç®¡ç†è§’è‰² | admin/manager/operator | - |
| å¯ç¦ç”¨ | âœ… | âœ… |
| å¯åˆ é™¤ | âœ… | âœ… |
| æŸ¥çœ‹åˆ—è¡¨ | âœ… | âœ… |
| ç¼–è¾‘ç”¨æˆ· | â³ | â³ |

## ğŸ”’ æƒé™è¯´æ˜

| æ“ä½œ | éœ€è¦æƒé™ |
|------|---------|
| æŸ¥çœ‹ Admin ç”¨æˆ·åˆ—è¡¨ | JWT Admin Token |
| åˆ›å»º/ç¼–è¾‘ Admin ç”¨æˆ· | JWT Admin Token (éœ€è¦ admin è§’è‰²) |
| æŸ¥çœ‹æ¶ˆè´¹è€…ç”¨æˆ·åˆ—è¡¨ | JWT Admin Token |
| ç¦ç”¨æ¶ˆè´¹è€…ç”¨æˆ· | JWT Admin Token |
| åˆ é™¤æ¶ˆè´¹è€…ç”¨æˆ· | JWT Admin Token |

## ğŸ“ ç›¸å…³æ–‡ä»¶

### å‰ç«¯æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `src/pages/Users.tsx` | Admin ç”¨æˆ·ç®¡ç†é¡µé¢ |
| `src/pages/ConsumerUsers.tsx` | æ¶ˆè´¹è€…ç”¨æˆ·ç®¡ç†é¡µé¢ |
| `src/services/users.ts` | Admin ç”¨æˆ· API æœåŠ¡ |
| `src/services/consumer-users.ts` | æ¶ˆè´¹è€…ç”¨æˆ· API æœåŠ¡ |
| `src/components/Layout.tsx` | èœå•å¯¼èˆª |
| `src/routes.tsx` | è·¯ç”±é…ç½® |

### åç«¯æ–‡ä»¶

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `src/entities/admin-user.entity.ts` | Admin ç”¨æˆ·å®ä½“ |
| `src/modules/admin-users/` | Admin ç”¨æˆ·æ¨¡å— |
| `src/entities/user.entity.ts` | æ¶ˆè´¹è€…ç”¨æˆ·å®ä½“ |
| `src/users/` | æ¶ˆè´¹è€…ç”¨æˆ·æ¨¡å— |

## âš¡ API ç«¯ç‚¹

### Admin ç”¨æˆ·

```bash
GET    /api/admin/users?page=1&limit=10       # è·å–åˆ—è¡¨
GET    /api/admin/users/{id}                  # è·å–å•ä¸ªç”¨æˆ·
POST   /api/admin/users                       # åˆ›å»ºç”¨æˆ·
PATCH  /api/admin/users/{id}                  # æ›´æ–°ç”¨æˆ·
DELETE /api/admin/users/{id}                  # åˆ é™¤ç”¨æˆ·
```

### æ¶ˆè´¹è€…ç”¨æˆ·

```bash
GET    /api/users?page=1&limit=10             # è·å–åˆ—è¡¨
GET    /api/users/{id}                        # è·å–å•ä¸ªç”¨æˆ·
DELETE /api/users/{id}                        # åˆ é™¤ç”¨æˆ·
PATCH  /api/users/{id}                        # æ›´æ–°ç”¨æˆ·ï¼ˆç¦ç”¨ç­‰ï¼‰
```

## ğŸ¯ å¸¸è§æ“ä½œ

### ç¦ç”¨æ¶ˆè´¹è€…ç”¨æˆ·

åœ¨æ¶ˆè´¹è€…ç”¨æˆ·åˆ—è¡¨ä¸­ï¼Œç‚¹å‡»"ç¦ç”¨"æŒ‰é’®ï¼Œç”¨æˆ·çŠ¶æ€å°†å˜ä¸º"ç¦ç”¨"ã€‚

### åˆ é™¤ Admin ç”¨æˆ·

åœ¨ Admin ç”¨æˆ·åˆ—è¡¨ä¸­ï¼Œç‚¹å‡»"åˆ é™¤"æŒ‰é’®åˆ é™¤ç®¡ç†å‘˜è´¦æˆ·ã€‚

### æŸ¥çœ‹ç”¨æˆ·ç»Ÿè®¡

æ¯ä¸ªç”¨æˆ·åˆ—è¡¨éƒ½æ˜¾ç¤ºï¼š
- æ€»ç”¨æˆ·æ•°ï¼ˆé€šè¿‡åˆ†é¡µçš„ totalï¼‰
- ç”¨æˆ·ç™»å½•æ¬¡æ•°
- æœ€åç™»å½•æ—¶é—´

## ğŸ” æ•°æ®å®‰å…¨

- âœ… æ‰€æœ‰ API éƒ½éœ€è¦ JWT è®¤è¯
- âœ… Admin ç”¨æˆ·å¯†ç ä½¿ç”¨ bcryptjs åŠ å¯†
- âœ… æ¶ˆè´¹è€…ç”¨æˆ·æ•°æ®ä¸ Admin æ•°æ®éš”ç¦»
- âœ… æ‰€æœ‰æ“ä½œéƒ½æœ‰è®¿é—®æƒé™æ£€æŸ¥

## ğŸ“ æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œå‚è€ƒï¼š
- `USERS_API_GUIDE.md` - API ä½¿ç”¨æŒ‡å—
- `ADMIN_USER_INIT.md` - Admin ç”¨æˆ·åˆå§‹åŒ–æŒ‡å—
- `README-CLOUD-DB-SETUP.md` - äº‘æ•°æ®åº“è®¾ç½®æŒ‡å—
